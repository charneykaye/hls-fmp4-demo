# HLS Fragmented MP4 demo

Here's my HLS playlist:

* [chunky.m3u8](chunky.m3u8)

I'm able to stream that link using [VLC](https://www.videolan.org/). However **I hear a tiny audio error** like "skipping" in between each of the 10-second segments.

Here's my initialization segment:

* [chunky-128k-IS.mp4](chunky-128k-IS.mp4)

And here are the fragmented mp4 segments generated by encoding AAC audio in `ffmpeg` and then writing only the media fragment to an .m4s using [java mp4parser](https://github.com/sannies/mp4parser):

* [chunky-128k-163840683.m4s](chunky-128k-163840683.m4s)
* [chunky-128k-163840684.m4s](chunky-128k-163840684.m4s)
* [chunky-128k-163840685.m4s](chunky-128k-163840685.m4s)
* [chunky-128k-163840686.m4s](chunky-128k-163840686.m4s)
* [chunky-128k-163840687.m4s](chunky-128k-163840687.m4s)
* [chunky-128k-163840688.m4s](chunky-128k-163840688.m4s)

Here are detailed lab notes about the process I developed to create these: [https://github.com/charneykaye/encode-fmp4-demo](https://github.com/charneykaye/encode-fmp4-demo)

Here's the output of `ffprobe chunky.m3u8`:

```
[hls @ 0x55fd1ae10f00] Skip ('#EXT-X-VERSION:7')
[hls @ 0x55fd1ae10f00] Opening 'chunky-128k-IS.mp4' for reading
[hls @ 0x55fd1ae10f00] Opening 'chunky-128k-163840683.m4s' for reading
Input #0, hls, from 'chunky.m3u8':
  Duration: 00:01:00.00, start: 0.000000, bitrate: 0 kb/s
  Program 0 
    Metadata:
      variant_bitrate : 0
    Stream #0:0: Audio: aac (LC) (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 128 kb/s
    Metadata:
      variant_bitrate : 0
      major_brand     : iso5
      minor_version   : 1
      compatible_brands: isomiso5dash
      creation_time   : 2021-12-02T00:21:18.000000Z
```

## Paradox?

I'm reading https://video.stackexchange.com/questions/34627/audio-discontinuities-when-generating-hls-segments-in-different-processes "MDCT-based codecs like AAC or MP3 carry out their transforms over multiple adjoining frames" and wonder if maybe the answer is, this is impossible with AAC or MP3 audio, and in fact, because individually generating the media segments ***is*** a constraint, I would need to generate MPEG-2 TS fragments?
